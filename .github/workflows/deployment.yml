name: Deploy

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  deploy-poetry:
    uses: giocaizzi/python-dev-actions/.github/workflows/deployment.yml@main
    secrets: inherit
    with:
      python-version: "3.10"
      # poetry ^py3.8
      python-tested-versions: "['3.8','3.9','3.10','3.11','3.12']"
      python-build-backend: "poetry"

  # legacy python3.7 using default (setuptools)
  deploy-setuptools:
    uses: giocaizzi/python-dev-actions/.github/workflows/deployment.yml@main
    secrets: inherit
    with:
      python-version: "3.7"
      python-tested-versions: "['3.7']"
      python-build-backend: "setuptools"
